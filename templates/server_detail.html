{% extends "base.html" %}
{% block title %}{{ info.name|default('–°–µ—Ä–≤–µ—Ä') }} ‚Äî MapStats{% endblock %}

{% block content %}
<div class="server-detail-page">
    <div class="page-header">
        <h2 class="page-title2">
            {% if info.icon_url %}
            <img src="/servers/assets/{{ guild_id }}_icon.png" 
            alt="Icon" 
            class="server-page-icon" 
            onerror="this.style.display='none'">
            {% endif %}
            {{ info.name|default('Unknown Server') }}
        </h2>
    </div>

    <div class="server-grid">
        <!-- –û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
        <div class="info-card">
            <h2>üìä –û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h2>
            <div class="info-grid">
                <div class="info-item">
                    <strong>–£—á–∞—Å—Ç–Ω–∏–∫–æ–≤:</strong> {{ info.member_count|default(0) }}
                </div>
                <div class="info-item">
                    <strong>–û–Ω–ª–∞–π–Ω:</strong> {{ info.online_count|default(0) }}
                </div>
                <div class="info-item">
                    <strong>ID:</strong> {{ guild_id }}
                </div>
                {% if info.premium_subscription_count > 0 %}
                <div class="info-item">
                    <strong>üöÄ –ë—É—Å—Ç–æ–≤:</strong> {{ info.premium_subscription_count }} (–£—Ä–æ–≤–µ–Ω—å {{ info.premium_tier }})
                </div>
                {% endif %}
                {% if info.invite_link %}
                <div class="info-item">
                    <a href="{{ info.invite_link }}" target="_blank" class="invite-link">üîó –ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è</a>
                </div>
                {% endif %}
            </div>
            {% if info.description %}
            <div class="server-description">
                <strong>–û–ø–∏—Å–∞–Ω–∏–µ:</strong>
                <p>{{ info.description }}</p>
            </div>
            {% endif %}
        </div>

        <!-- –ü–µ—Ä–µ—Å–µ—á–µ–Ω–∏—è -->
        {% if server.member_overlaps %}
        <div class="info-card">
            <h2>üîó –ü–µ—Ä–µ—Å–µ—á–µ–Ω–∏—è —Å –¥—Ä—É–≥–∏–º–∏ —Å–µ—Ä–≤–µ—Ä–∞–º–∏</h2>
            <div class="overlaps-list">
                {% for other_id, overlap in server.member_overlaps.items() %}
                <div class="overlap-item">
                    <strong><a href="/server/{{ other_id }}">{{ overlap.server_name }}</a></strong>
                    ‚Äî {{ overlap.common_count }} –æ–±—â–∏—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
                </div>
                {% endfor %}
            </div>
        </div>
        {% endif %}
    </div>
</div>
{% endblock %}